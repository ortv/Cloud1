@model Order
@{
    ViewData["Title"] = "Index";
        Layout = "~/Views/Shared/_Layout.cshtml";

}
<form method="post" action="/Orders/Update">
    <div>
        <label for="OrderDate">Order Date:</label>
        <input type="text" id="OrderDate" name="OrderDate" value="@Model.OrderDate" readonly />
    </div>
    <div>
        <label for="TotalPrice">Total Price:</label>
        <input type="text" id="TotalPrice" name="TotalPrice" value="@Model.TotalPrice" readonly />
    </div>
    <div>
        <label for="Name">Name:</label>
        <input type="text" id="Name" name="Name" value="@Model.Name" />
    </div>
    <div>
        <label for="Address">Address:</label>
        <input type="text" id="Address" name="Address" value="@Model.Address" />
    </div>
    <div>
        <label for="City">City:</label>
        <input type="text" id="City" name="City" value="@Model.City" />
    </div>
    <div>
        <label for="Email">Email:</label>
        <input type="text" id="Email" name="Email" value="@Model.Email" />
    </div>
    <div>
        <label for="DiscountedPrice">Discounted Price:</label>
        <input type="text" id="DiscountedPrice" name="DiscountedPrice" readonly />
    </div>

    <div>
        <label for="CouponCode">Coupon Code:</label>
        <input type="text" id="CouponCode" name="CouponCode" />
        <button type="button" onclick="applyCoupon()">Apply Coupon</button>
    </div>
    <form id="orderForm" action="@Url.Action("Create", "Orders")" method="post">
        <!-- אוסף כאן את הפרטים שאתה רוצה לשלוח עם הטופס -->
        <input type="hidden" name="totalPrice" value="@Model.TotalPrice.ToString("C")">
       @* <div class="form-group">
            <input type="button" value="PayPal HTML" onclick="redicatToPayPal()" class="btn"/>
        </div>*@
        <!-- כפתור ה-Order -->
        <button type="submit" id="orderButton">Order Now </button>
    </form>
</form>
<script>
    function applyCoupon() {
        // Get the entered coupon code
        const couponCode = document.getElementById('CouponCode').value;

        // Assuming you have a server-side endpoint to check the coupon
        // This is a simplified example, and you need to implement the actual server-side logic
        fetch(`/check-coupon?code=${couponCode}`)
            .then(response => response.json())
            .then(data => {
                if (data.valid) {
                    // Apply the discount on the front-end
                    const originalPrice = parseFloat(document.getElementById('TotalPrice').value.replace(',', ''));
                    const discountedPriceInput = document.getElementById('DiscountedPrice');
                    const discountedPrice = originalPrice - 10;

                    // Update the input field with the discounted price
                    discountedPriceInput.value = discountedPrice.toFixed(2);

                    // You can also update other parts of your UI to reflect the discount
                } else {
                    alert('Invalid coupon code. Please try again.');
                }
            })
            .catch(error => console.error('Error:', error));
    }
</script>

